# Тестовое задание для М.Видео-Эльдорадо

## Задача

Есть файл (https://yadi.sk/d/NG-huzs-X-5U5Q) с данными по рекомендациям одних товаров к другим, по одной рекомендации на строку:

sku1,recom1,0.1
sku2,recom2,0.2
…
Последний столбец содержит вероятность правильной рекомендации, то есть “близость” рекомендованного товара к исходному.

Что нужно сделать:

1. Написать API на python с одним эндпоинтом, который принимает sku в качестве параметра и возвращает список всех товаров, рекомендованных для этого sku. Должна быть возможность указать опциональный параметр минимального порога близости для рекомендаций.
2. Продумать стратегию масштабирования сервиса при увеличении нагрузки, а также дать примерную оценку потребления ресурсов в случае, если размер данных по рекомендациям начнет расти.

Задача должна быть решена без использования сторонних сервисов (например, баз данных). Разрешено использование сторонних библиотек. При оценке выполненного задания будут учитываться время ответа сервиса на запрос и потребление им памяти.

## Описание Api

Эндпоинт

```
/api/v1/recommendation/
```

parameters

- **sku** - Наименование sku (Обязательный) - Текст
- **accuracy** - Минимальный порог близости для рекомендаций (Опциональный) - Число с плавающей точкой

Пример запроса:

```
http://0.0.0.0:5000/api/v1/recommendation/?sku=t92yxYYDLt&accuracy=0.6
```

## Техническое описание

При инициализации приложения csv-файл считывается приложением и данные сохраняются в качестве вложенного словаря `({sku: {accuracy: recommendation})` для быстрого поиска информации и формирования ответа. Обновление данных происходит с периодичностью (время объявлено в config.py как UPDATE_DELAY, по умолчанию 3600 секунд).

При обращении по эндпоинту данные считываются из словарей, согласно get-параметрам, поиск происходит по ключам. Параметры проверяются на корректность, в случае неверно-указанных в ответе будет указано название параметра, который указан ошибочно.

## Используемые инструменты

Python, Flask

## Запуск

### Подготовка

Скопировать файл `recommends.csv` в папку проекта `data`

### docker

Запустить docker-compose:

```
docker-compose up
```

### virual env

Создать виртуальное окружение

```
python3 -m venv venv
```

Активировать виртуальное окружение

```
source venv/bin/activate
```

Установить необходимые пакеты

```
pip install -r requirements.txt
```

Запустить приложение

```
flask run
```
